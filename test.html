<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Тест Шкала депрессии Бека</title>
<link rel="stylesheet" href="styles.css" />
</head>
<body>
<div id="instructionSection">
  <h1>Тест по шкале депрессии Бека</h1>  
  <h1>Инструкция</h1>
    <p> В этом опроснике содержатся группы утверждений. Внимательно прочитайте каждую группу утверждений. Затем определите в каждой группе одно
утверждение, которое лучше всего соответствует тому, как Вы себя чувствовали НА
ЭТОЙ НЕДЕЛЕ И СЕГОДНЯ. Поставьте галочку около выбранного утверждения. Если
несколько утверждений из одной группы кажутся Вам одинаково хорошо подходящими,
то поставьте галочки около каждого из них. Прежде, чем сделать свой выбор,
убедитесь, что Вы прочли все утверждения в каждой группе</p>
    <button onclick="startTest()">Начать тестирование</button>
  </div>

<style>
  /* Стили для скрытия разделов */
  #depressionTest, #result {
    display: none;
  }
</style>

<div class="test-container">
 
  <form id="depressionTest">
    <h1>Тест по шкале депрессии Бека</h1>
  <!-- Вопрос 1 -->
    <div class="question">
      <h3>1. Я чувствовал(а) себя подавленным(ой) или грустным(ой):</h3>
      <div class="answers">
        <label><input type="radio" name="q1" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q1" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q1" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q1" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <!-- Вопрос 2 -->
    <div class="question">
      <h3>2. Я чувствовал(а) усталость или потерю энергии:</h3>
      <div class="answers">
        <label><input type="radio" name="q2" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q2" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q2" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q2" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <!-- Вопрос 3 -->
    <div class="question">
      <h3>3. Я испытывал(а) чувство безнадежности:</h3>
      <div class="answers">
        <label><input type="radio" name="q3" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q3" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q3" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q3" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <!-- Вопрос 4 -->
    <div class="question">
      <h3>4. Я испытывал(а) снижение аппетита или переедание:</h3>
      <div class="answers">
        <label><input type="radio" name="q4" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q4" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q4" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q4" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <!-- Вопрос 5 -->
    <div class="question">
      <h3>5. Я чувствовал(а) плохое настроение или уныние:</h3>
      <div class="answers">
        <label><input type="radio" name="q5" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q5" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q5" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q5" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <!-- Вопрос 6 -->
    <div class="question">
      <h3>6. Я испытывал(а) трудности с концентрацией внимания:</h3>
      <div class="answers">
        <label><input type="radio" name="q6" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q6" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q6" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q6" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <!-- Вопрос 7 -->
    <div class="question">
      <h3>7. Я чувствовал(а) тревогу или нервозность:</h3>
      <div class="answers">
        <label><input type="radio" name="q7" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q7" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q7" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q7" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <!-- Вопрос 8 -->
    <div class="question">
      <h3>8. Я чувствовал(а) потерю интереса к деятельности:</h3>
      <div class="answers">
        <label><input type="radio" name="q8" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q8" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q8" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q8" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <!-- Вопрос 9 -->
    <div class="question">
      <h3>9. Я чувствовал(а) раздражение или злость:</h3>
      <div class="answers">
        <label><input type="radio" name="q9" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q9" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q9" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q9" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <!-- Вопрос 10 -->
    <div class="question">
      <h3>10. Я чувствовал(а) чувство вины или никчемности:</h3>
      <div class="answers">
        <label><input type="radio" name="q10" value="0" required /> Не испытывал(а)</label>
        <label><input type="radio" name="q10" value="1" /> Несколько дней</label>
        <label><input type="radio" name="q10" value="2" /> Более половины дней</label>
        <label><input type="radio" name="q10" value="3" /> Почти каждый день</label>
      </div>
    </div>

    <button type="submit">Подсчитать результат</button>
  </form>
  <div id="result"></div>
</div>

  <script>
    function startTest() {
      document.getElementById("instructionSection").style.display = "none";
      document.getElementById("depressionTest").style.display = "block";
    }

    function showResults() {
      let totalScore = 0;

      // Считаем результат
      totalScore += parseInt(document.querySelector('input[name="q1"]:checked').value);
      // Считаем остальные ответы тут
      totalScore += parseInt(document.querySelector('input[name="q2"]:checked').value);
      // ... остальные вопросы

      let interpretation = "";
      if (totalScore <= 9) {
        interpretation = "отсутствие депрессивных симптомов";
      } else if (totalScore <= 15) {
        interpretation = "легкая депрессия (субдепрессия)";
      } else if (totalScore <= 19) {
        interpretation = "умеренная депрессия";
      } else if (totalScore <= 29) {
        interpretation = "выраженная депрессия (средняя или умеренно тяжелая)";
      } else {
        interpretation = "тяжелая депрессия";
      }

      // Отображаем результат и интерпретацию
      document.getElementById("question").style.display = "none";
      document.getElementById("resultsSection").style.display = "block";
      document.getElementById("score").innerText = "Ваш результат: " + totalScore;
      document.getElementById("interpretation").innerText = "Интерпретация: " + interpretation;
      
       async function saveResult() {
            const score = document.getElementById('score').value;
            const response = await fetch('/api/save-result', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ score: parseInt(score) })
            });
            alert('Результат сохранен!');
        }
        
        async function result() {
            const response = await fetch('/api/result');
            const data = await response.json();
            
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h3>Ваш результат: ${data.score} баллов</h3>
                <p><strong>Диагноз:</strong> ${data.diagnosis}</p>
            `;
        }
    }
  </script>

</body>
</html>


