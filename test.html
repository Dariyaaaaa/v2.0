<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Тест на депрессию</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f2f2f2;
    margin: 0;
    padding: 20px;
  }
  .container {
    max-width: 800px;
    margin: auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
  }
  h1 {
    text-align: center;
  }
  .progress-container {
    width: 100%;
    background-color: #ddd;
    border-radius: 20px;
    height: 20px;
    margin-bottom: 20px;
  }
  .progress-bar {
    height: 100%;
    width: 0%;
    background-color: #4CAF50;
    border-radius: 20px;
    transition: width 0.3s ease;
  }
  .question-container {
    display: none;
  }
  .question-container.active {
    display: block;
  }
  .question {
    font-size: 1.2em;
    margin-bottom: 15px;
  }
  .option {
    margin-bottom: 10px;
    cursor: pointer;
  }
  input[type="radio"] {
    display: none; /* скрываем радиокнопки */
  }
  label {
    padding-left: 25px;
    position: relative;
    cursor: pointer;
    user-select: none; /* отключить выделение текста при клике */
}
label span {
   position: relative; 
}
label::before {
   content:"";
   position:absolute; 
   left:-25px; 
   top:-2px; 
   width:20px; 
   height:20px; 
   border-radius:50%; 
   border:2px solid #999; 
}
input[type="radio"]:checked + label::after {
   content:"";
   position:absolute; 
   left:-19px; 
   top:-8px; 
   width:10px; 
   height:10px; 
   border-radius:50%; 
   background:#4CAF50; 
}
button {
   display:inline-block; 
   padding:10px 20px; 
   font-size:16px; 
   margin-top:-10px; /* убираем отступ */
   cursor:pointer; 
   background-color:#4CAF50; 
   color:#fff; 
   border:none; 
   border-radius:5px; 
}
button:hover {
   background-color:#45a049
}
#result {
 text-align:center; margin-top:-10px;}
#result h2 {margin-top:-10;}
#restartBtn {margin-top:-10;}
</style>
</head>
<body>

<div class="container">
<h1>Тест на депрессию</h1>

<div class="progress-container">
<div class="progress-bar" id="progressBar"></div>
</div>

<!-- Вопросы -->
<div id="question1" class="question-container active">
 <div class="question">1. Что лучше описывает Ваше состояние за прошедшую неделю и сегодня?</div>
 <div class="option">
   <input type="radio" name="q1" value="0" id="q1a1"/>
   <label for="q1a1"><span>Я не чувствую себя расстроенным, печальным.</span></label>
 </div>
 <div class="option">
   <input type="radio" name="q1" value="1" id="q1a2"/>
   <label for="q1a2"><span>Я расстроен.</span></label>
 </div>
 <div class="option">
   <input type="radio" name="q1" value="2" id="q1a3"/>
   <label for="q1a3"><span>Я всё время расстроен и не могу от этого отключиться.</span></label>
 </div>
 <div class="option">
   <input type="radio" name="q1" value="3" id="q1a4"/>
   <label for="q1a4"><span>Я настолько расстроен и несчастлив, что не могу это выдержать.</span></label>
 </div>
</div>

<div id="question2" class="question-container">
 <div class="question">2. За прошедшую неделю Вы чувствовали себя усталым или уставшим без видимой причины?</div>
 <div class="option">
     <input type='radio' name='q2' value='0' id='q2a1'/>
     <label for='q2a1'><span>Нет, я чувствую себя хорошо.</span></label>
 </div>
<div class='option'>
     <input type='radio' name='q2' value='1' id='q2a2'/>
     <label for='q2a2'><span>Иногда чувствовал усталость, но это было нечасто.</span></label>
 </div>
<div class='option'>
     <input type='radio' name='q2' value='2' id='q2a3'/>
     <label for='q2a3'><span>Да, я часто чувствовал усталость без причины.</span></label>
 </div>
<div class='option'>
     <input type='radio' name='q2' value='3' id='q2a4'/>
     <label for='q2a4'><span>Я постоянно уставший и не могу восстановиться.</span></label>
 </div>
</div>

<div id="question3" class="question-container">
<div class='question'>3. За прошедшую неделю Вы испытывали снижение интереса или удовольствия от деятельности?</div>
<div class='option'>
     <input type='radio' name='q3' value='0' id='q3a1'/>
     <label for='q3a1'><span>Нет, всё было нормально.</span></label>
</div>
<div class='option'>
     <input type='radio' name='q3' value='1' id='q3a2'/>
     <label for='q3a2'><span>Иногда я терял интерес, но быстро возвращался к норме.</span></label>
</div>
<div class='option'>
     <input type='radio' name='q3' value='2' id='q3a3'/>
     <label for='q3a3'><span>Да, я часто терял интерес к вещам, которые раньше мне нравились.</span></label>
</div>
<div class='option'>
     <input type='radio' name='q3' value='3' id='q3a4'/>
     <label for='q3a4'><span>Я полностью потерял интерес к большинству дел и развлечений.</span></label>
</div>
</div>

<!-- Результаты -->
<div id="resultContainer" style="display:none;">
<h2>Результаты теста:</h2>
<p id ="result"></p><br/>
<button onclick=restart()>Пройти заново</button><br/><br/>
</div>

<!-- Скрипты -->
<script>
// Общее количество вопросов
const totalQuestions = 3;
// Текущий номер вопрос
let currentQuestion = 1;
// Массив для хранения баллов
let scores = [];

// Обновление прогресс-бара
function updateProgress() {
 const progress = (currentQuestion -1) / totalQuestions *100 + (currentQuestion > totalQuestions ?0 :100/totalQuestions);
 document.getElementById("progressBar").style.width = progress + "%";
}

// Показать следующий вопрос
function nextQuestion() {
 // Сохраняем ответ текущего вопроса
 const answer = document.querySelector(`input[name=q${currentQuestion}]:checked`);
 if(answer){
      scores[currentQuestion -1] = parseInt(answer.value);
 } else{
      // Если ответ не выбран, считаем нулевым или пропускаем
      scores[currentQuestion -1] =0;
 }

 // Скрываем текущий вопрос
 document.getElementById(`question${currentQuestion}`).classList.remove('active');

 // Увеличиваем номер вопроса
 currentQuestion++;
 if(currentQuestion > totalQuestions){
     showResult();
 } else{
     // Показываем следующий вопрос
     document.getElementById(`question${currentQuestion}`).classList.add('active');
 }

 updateProgress();
}

// Показываем результат
function showResult() {
 // Расчет итогового балла
 const totalScore = scores.reduce((acc, val) => acc + val,0);
 let diagnosis = "";
 if(totalScore <=4){
 diagnosis= "У вас отсутствуют признаки депрессии.";
 } else if(totalScore <=8){
 diagnosis= "Возможны признаки легкой депрессии.";
 } else if(totalScore <=12){
 diagnosis= "Возможны признаки средней депрессии.";
 } else{
 diagnosis= "Возможны признаки тяжелой депрессии.";
 }

 document.getElementById("result").innerText=diagnosis;

 // Показать результат и скрыть вопросы
 document.getElementById("resultContainer").style.display ="block";
 // скрыть все вопросы
 for(let i=1;i<=totalQuestions;i++){
 document.getElementById(`question${i}`).style.display ="none";
 }
}

// Перезапуск теста
function restart() {
 currentQuestion=1;
 scores=[];
 // скрыть результат
 document.getElementById("resultContainer").style.display ="none";
 // показать все вопросы заново
 for(let i=1;i<=totalQuestions;i++){
 document.getElementById(`question${i}`).style.display ="block";
 document.getElementById(`question${i}`).classList.remove('active');
 }
 // активировать первый вопрос
 document.getElementById(`question${currentQuestion}`).classList.add('active');
 updateProgress();
}

// Инициализация обработчиков для автоматического перехода при выборе ответа
function setupAutoNext(questionNumber) {
 const radios = document.querySelectorAll(`input[name=q${questionNumber}]`);
 radios.forEach(radio => {
 radio.addEventListener('change', () => {
 nextQuestion();
 });
 });
}

// Инициализация при загрузке страницы
window.onload = () => {
 updateProgress();
 setupAutoNext(1);
 setupAutoNext(2);
 setupAutoNext(3);
};
</script>

</body>
</html>
